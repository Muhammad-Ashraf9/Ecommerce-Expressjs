<%- include('../partials/head') %> 
<link rel="stylesheet" href="/css/card.css" />

</head>
<%- include('../partials/navigation') %>

<main>
  <h2><%= pageTitle%></h2>
  <ul class="products-container">
    <% if(products.length > 0){ %> 
      <% for(let i=0;i<products.length;i++ ){ %>
      <li>
      <div class="card">
        <div class="card-img">
        <img src="<%= products[i].imageUrl.slice(6) %>" alt="<%= products[i].title %>" />
        </div>
        <div class="card-info">
        <p class="text-title"><%= products[i].title %></p>
        <p class="text-body"><%= products[i].description.slice(0,30) %></p>
        <a href="/products/<%=products[i]._id%>">..Read more</a
        </div>
       <div class="card-footer">
      <span class="text-title"><%= products[i].price %> $</span>
      <%- include('../partials/add-to-cart',{product:products[i]}) %>
        </div>
        
        <% } %> 
      </li>
    </ul>
    <ul class="pages-container">
      <% if (currentPage > 1 ) { %>
        <li class="page">
          <a href=<%=  "?page=" + ( currentPage - 1) %>  class="btn page__prev">
          &larr;
          </a>
        </li>
      <% } %>
      <li class="page">
        <p class="page__cur">
          <%= currentPage  %>
        </p>
      </li>
      <% if (currentPage < totalPages ) { %>    
        <li class="page">
         <a href=<%=  "?page=" + (currentPage + 1) %>  class="btn page__next">
           &rarr;
         </a>
       </li>
      <% } %>   
    </ul>
    <% }else{ %>
    <div>No products found</div>
    <% } %>
 

</main>
<%- include('../partials/footer') %>
